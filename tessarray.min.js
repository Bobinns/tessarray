// ------ Flickr Justified Layout ------
// Copyright 2016 Yahoo Inc.
// Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var merge=require("merge");var Row=module.exports=function(params){this.top=params.top;this.left=params.left;this.width=params.width;this.spacing=params.spacing;this.targetRowHeight=params.targetRowHeight;this.targetRowHeightTolerance=params.targetRowHeightTolerance;this.minAspectRatio=this.width/params.targetRowHeight*(1-params.targetRowHeightTolerance);this.maxAspectRatio=this.width/params.targetRowHeight*(1+params.targetRowHeightTolerance);this.edgeCaseMinRowHeight=params.edgeCaseMinRowHeight||Number.NEGATIVE_INFINITY;this.edgeCaseMaxRowHeight=params.edgeCaseMaxRowHeight||Number.POSITIVE_INFINITY;this.rightToLeft=params.rightToLeft;this.isBreakoutRow=params.isBreakoutRow;this.items=[];this.height=0};Row.prototype={addItem:function addItem(itemData){var newItems=this.items.concat(itemData),rowWidthWithoutSpacing=this.width-(newItems.length-1)*this.spacing,newAspectRatio=newItems.reduce(function(sum,item){return sum+item.aspectRatio},0),targetAspectRatio=rowWidthWithoutSpacing/this.targetRowHeight,previousRowWidthWithoutSpacing,previousAspectRatio,previousTargetAspectRatio;if(this.isBreakoutRow){if(this.items.length===0){if(itemData.aspectRatio>=1){this.items.push(itemData);this.completeLayout(rowWidthWithoutSpacing/itemData.aspectRatio);return true}}}if(newAspectRatio===0){return false}if(newAspectRatio<this.minAspectRatio){this.items.push(merge(itemData));return true}else if(newAspectRatio>this.maxAspectRatio){if(this.items.length===0){this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio);return true}previousRowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing;previousAspectRatio=this.items.reduce(function(sum,item){return sum+item.aspectRatio},0);previousTargetAspectRatio=previousRowWidthWithoutSpacing/this.targetRowHeight;if(Math.abs(newAspectRatio-targetAspectRatio)>Math.abs(previousAspectRatio-previousTargetAspectRatio)){this.completeLayout(previousRowWidthWithoutSpacing/previousAspectRatio);return false}else{this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio);return true}}else{this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio);return true}},isLayoutComplete:function isLayoutComplete(){return this.height>0},completeLayout:function completeLayout(newHeight,justify){var itemWidthSum=this.rightToLeft?-this.left:this.left,rowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing,clampedToNativeRatio,roundedHeight,clampedHeight,errorWidthPerItem,roundedCumulativeErrors,singleItemGeometry,self=this;if(typeof justify==="undefined"){justify=true}roundedHeight=Math.round(newHeight);clampedHeight=Math.max(this.edgeCaseMinRowHeight,Math.min(roundedHeight,this.edgeCaseMaxRowHeight));if(roundedHeight!==clampedHeight){this.height=clampedHeight;clampedToNativeRatio=rowWidthWithoutSpacing/clampedHeight/(rowWidthWithoutSpacing/roundedHeight)}else{this.height=roundedHeight;clampedToNativeRatio=1}this.items.forEach(function(item,i){item.top=self.top;item.width=Math.round(item.aspectRatio*self.height*clampedToNativeRatio);item.height=self.height;if(self.rightToLeft){item.left=self.width-itemWidthSum-item.width}else{item.left=itemWidthSum}itemWidthSum+=item.width+self.spacing});if(justify){if(!this.rightToLeft){itemWidthSum-=this.spacing+this.left}errorWidthPerItem=(itemWidthSum-this.width)/this.items.length;roundedCumulativeErrors=this.items.map(function(item,i){return Math.round((i+1)*errorWidthPerItem)});if(this.items.length===1){singleItemGeometry=this.items[0];singleItemGeometry.width-=Math.round(errorWidthPerItem);if(this.rightToLeft){singleItemGeometry.left+=Math.round(errorWidthPerItem)}}else{this.items.forEach(function(item,i){if(i>0){item.left-=roundedCumulativeErrors[i-1];item.width-=roundedCumulativeErrors[i]-roundedCumulativeErrors[i-1]}else{item.width-=roundedCumulativeErrors[i]}})}}},forceComplete:function forceComplete(fitToWidth,rowHeight){var rowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing,currentAspectRatio=this.items.reduce(function(sum,item){return sum+item.aspectRatio},0);if(typeof rowHeight==="number"){this.completeLayout(rowHeight,false)}else if(fitToWidth){this.completeLayout(rowWidthWithoutSpacing/currentAspectRatio)}else{this.completeLayout(this.targetRowHeight,false)}},getItems:function getItems(){return this.items}}},{merge:2}],2:[function(require,module,exports){(function(isNode){var Public=function(clone){return merge(clone===true,false,arguments)},publicName="merge";Public.recursive=function(clone){return merge(clone===true,true,arguments)};Public.clone=function(input){var output=input,type=typeOf(input),index,size;if(type==="array"){output=[];size=input.length;for(index=0;index<size;++index)output[index]=Public.clone(input[index])}else if(type==="object"){output={};for(index in input)output[index]=Public.clone(input[index])}return output};function merge_recursive(base,extend){if(typeOf(base)!=="object")return extend;for(var key in extend){if(typeOf(base[key])==="object"&&typeOf(extend[key])==="object"){base[key]=merge_recursive(base[key],extend[key])}else{base[key]=extend[key]}}return base}function merge(clone,recursive,argv){var result=argv[0],size=argv.length;if(clone||typeOf(result)!=="object")result={};for(var index=0;index<size;++index){var item=argv[index],type=typeOf(item);if(type!=="object")continue;for(var key in item){var sitem=clone?Public.clone(item[key]):item[key];if(recursive){result[key]=merge_recursive(result[key],sitem)}else{result[key]=sitem}}}return result}function typeOf(input){return{}.toString.call(input).slice(8,-1).toLowerCase()}if(isNode){module.exports=Public}else{window[publicName]=Public}})(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports)},{}],"justified-layout":[function(require,module,exports){"use strict";var merge=require("merge"),Row=require("./row"),layoutConfig={},layoutData={},currentRow=false;module.exports=function(input){var config=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var defaults={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:false,showWidows:true,fullWidthBreakoutRowCadence:false};layoutConfig=merge(defaults,config);var containerPadding={};var boxSpacing={};containerPadding.top=!isNaN(parseFloat(layoutConfig.containerPadding.top))?layoutConfig.containerPadding.top:layoutConfig.containerPadding;containerPadding.right=!isNaN(parseFloat(layoutConfig.containerPadding.right))?layoutConfig.containerPadding.right:layoutConfig.containerPadding;containerPadding.bottom=!isNaN(parseFloat(layoutConfig.containerPadding.bottom))?layoutConfig.containerPadding.bottom:layoutConfig.containerPadding;containerPadding.left=!isNaN(parseFloat(layoutConfig.containerPadding.left))?layoutConfig.containerPadding.left:layoutConfig.containerPadding;boxSpacing.horizontal=!isNaN(parseFloat(layoutConfig.boxSpacing.horizontal))?layoutConfig.boxSpacing.horizontal:layoutConfig.boxSpacing;boxSpacing.vertical=!isNaN(parseFloat(layoutConfig.boxSpacing.vertical))?layoutConfig.boxSpacing.vertical:layoutConfig.boxSpacing;layoutConfig.containerPadding=containerPadding;layoutConfig.boxSpacing=boxSpacing;layoutData._layoutItems=[];layoutData._awakeItems=[];layoutData._inViewportItems=[];layoutData._leadingOrphans=[];layoutData._trailingOrphans=[];layoutData._containerHeight=layoutConfig.containerPadding.top;layoutData._rows=[];layoutData._orphans=[];return computeLayout(input.map(function(item){if(item.width&&item.width){return{aspectRatio:item.width/item.height}}else{return{aspectRatio:item}}}))};function computeLayout(itemLayoutData){var notAddedNotComplete,laidOutItems=[],itemAdded,currentRow,nextToLastRowHeight;if(layoutConfig.forceAspectRatio){itemLayoutData.forEach(function(itemData){itemData.forcedAspectRatio=true;itemData.aspectRatio=layoutConfig.forceAspectRatio})}itemLayoutData.some(function(itemData,i){notAddedNotComplete=false;if(!currentRow){currentRow=createNewRow()}itemAdded=currentRow.addItem(itemData);if(currentRow.isLayoutComplete()){laidOutItems=laidOutItems.concat(addRow(currentRow));if(layoutData._rows.length>=layoutConfig.maxNumRows){currentRow=null;return true}currentRow=createNewRow();if(!itemAdded){itemAdded=currentRow.addItem(itemData);if(currentRow.isLayoutComplete()){laidOutItems=laidOutItems.concat(addRow(currentRow));if(layoutData._rows.length>=layoutConfig.maxNumRows){currentRow=null;return true}currentRow=createNewRow()}else if(!itemAdded){notAddedNotComplete=true}}}else{if(!itemAdded){notAddedNotComplete=true}}});if(currentRow&&currentRow.getItems().length&&layoutConfig.showWidows){if(layoutData._rows.length){if(layoutData._rows[layoutData._rows.length-1].isBreakoutRow){nextToLastRowHeight=layoutData._rows[layoutData._rows.length-1].targetRowHeight}else{nextToLastRowHeight=layoutData._rows[layoutData._rows.length-1].height}currentRow.forceComplete(false,nextToLastRowHeight||layoutConfig.targetRowHeight)}else{currentRow.forceComplete(false)}laidOutItems=laidOutItems.concat(addRow(currentRow))}layoutData._containerHeight=layoutData._containerHeight-layoutConfig.boxSpacing.vertical;layoutData._containerHeight=layoutData._containerHeight+layoutConfig.containerPadding.bottom;return{containerHeight:layoutData._containerHeight,boxes:layoutData._layoutItems}}function createNewRow(){if(layoutConfig.fullWidthBreakoutRowCadence!==false){if((layoutData._rows.length+1)%layoutConfig.fullWidthBreakoutRowCadence===0){var isBreakoutRow=true}}return new Row({top:layoutData._containerHeight,left:layoutConfig.containerPadding.left,width:layoutConfig.containerWidth-layoutConfig.containerPadding.left-layoutConfig.containerPadding.right,spacing:layoutConfig.boxSpacing.horizontal,targetRowHeight:layoutConfig.targetRowHeight,targetRowHeightTolerance:layoutConfig.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*layoutConfig.targetRowHeight,edgeCaseMaxRowHeight:2*layoutConfig.targetRowHeight,rightToLeft:false,isBreakoutRow:isBreakoutRow})}function addRow(row){layoutData._rows.push(row);layoutData._layoutItems=layoutData._layoutItems.concat(row.getItems());layoutData._containerHeight+=row.height+layoutConfig.boxSpacing.vertical;return row.items}},{"./row":1,merge:2}]},{},[]);

// ------ Tessarray ------
// Copyright 2016 Dixon and Moe
// Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
require=function t(i,e,s){function o(a,r){if(!e[a]){if(!i[a]){var h="function"==typeof require&&require;if(!r&&h)return h(a,!0);if(n)return n(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=e[a]={exports:{}};i[a][0].call(d.exports,function(t){var e=i[a][1][t];return o(e?e:t)},d,d.exports,t,i,e,s)}return e[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(t,i,e){"use strict";var s=t("merge"),o=i.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight||Number.NEGATIVE_INFINITY,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight||Number.POSITIVE_INFINITY,this.rightToLeft=t.rightToLeft,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0};o.prototype={addItem:function(t){var i,e,o,n=this.items.concat(t),a=this.width-(n.length-1)*this.spacing,r=n.reduce(function(t,i){return t+i.aspectRatio},0),h=a/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&t.aspectRatio>=1?(this.items.push(t),this.completeLayout(a/t.aspectRatio),!0):0===r?!1:r<this.minAspectRatio?(this.items.push(s(t)),!0):r>this.maxAspectRatio?0===this.items.length?(this.items.push(s(t)),this.completeLayout(a/r),!0):(i=this.width-(this.items.length-1)*this.spacing,e=this.items.reduce(function(t,i){return t+i.aspectRatio},0),o=i/this.targetRowHeight,Math.abs(r-h)>Math.abs(e-o)?(this.completeLayout(i/e),!1):(this.items.push(s(t)),this.completeLayout(a/r),!0)):(this.items.push(s(t)),this.completeLayout(a/r),!0)},isLayoutComplete:function(){return this.height>0},completeLayout:function(t,i){var e,s,o,n,a,r,h=this.rightToLeft?-this.left:this.left,c=this.width-(this.items.length-1)*this.spacing,d=this;"undefined"==typeof i&&(i=!0),s=Math.round(t),o=Math.max(this.edgeCaseMinRowHeight,Math.min(s,this.edgeCaseMaxRowHeight)),s!==o?(this.height=o,e=c/o/(c/s)):(this.height=s,e=1),this.items.forEach(function(t,i){t.top=d.top,t.width=Math.round(t.aspectRatio*d.height*e),t.height=d.height,d.rightToLeft?t.left=d.width-h-t.width:t.left=h,h+=t.width+d.spacing}),i&&(this.rightToLeft||(h-=this.spacing+this.left),n=(h-this.width)/this.items.length,a=this.items.map(function(t,i){return Math.round((i+1)*n)}),1===this.items.length?(r=this.items[0],r.width-=Math.round(n),this.rightToLeft&&(r.left+=Math.round(n))):this.items.forEach(function(t,i){i>0?(t.left-=a[i-1],t.width-=a[i]-a[i-1]):t.width-=a[i]}))},forceComplete:function(t,i){var e=this.width-(this.items.length-1)*this.spacing,s=this.items.reduce(function(t,i){return t+i.aspectRatio},0);"number"==typeof i?this.completeLayout(i,!1):t?this.completeLayout(e/s):this.completeLayout(this.targetRowHeight,!1)},getItems:function(){return this.items}}},{merge:2}],2:[function(t,i,e){!function(t){function e(t,i){if("object"!==o(t))return i;for(var s in i)"object"===o(t[s])&&"object"===o(i[s])?t[s]=e(t[s],i[s]):t[s]=i[s];return t}function s(t,i,s){var a=s[0],r=s.length;(t||"object"!==o(a))&&(a={});for(var h=0;r>h;++h){var c=s[h],d=o(c);if("object"===d)for(var l in c){var g=t?n.clone(c[l]):c[l];i?a[l]=e(a[l],g):a[l]=g}}return a}function o(t){return{}.toString.call(t).slice(8,-1).toLowerCase()}var n=function(t){return s(t===!0,!1,arguments)},a="merge";n.recursive=function(t){return s(t===!0,!0,arguments)},n.clone=function(t){var i,e,s=t,a=o(t);if("array"===a)for(s=[],e=t.length,i=0;e>i;++i)s[i]=n.clone(t[i]);else if("object"===a){s={};for(i in t)s[i]=n.clone(t[i])}return s},t?i.exports=n:window[a]=n}("object"==typeof i&&i&&"object"==typeof i.exports&&i.exports)},{}],"justified-layout":[function(t,i,e){"use strict";function s(t){var i,e,s,a,r=[];return h.forceAspectRatio&&t.forEach(function(t){t.forcedAspectRatio=!0,t.aspectRatio=h.forceAspectRatio}),t.some(function(t,a){if(i=!1,s||(s=o()),e=s.addItem(t),s.isLayoutComplete()){if(r=r.concat(n(s)),c._rows.length>=h.maxNumRows)return s=null,!0;if(s=o(),!e)if(e=s.addItem(t),s.isLayoutComplete()){if(r=r.concat(n(s)),c._rows.length>=h.maxNumRows)return s=null,!0;s=o()}else e||(i=!0)}else e||(i=!0)}),s&&s.getItems().length&&h.showWidows&&(c._rows.length?(a=c._rows[c._rows.length-1].isBreakoutRow?c._rows[c._rows.length-1].targetRowHeight:c._rows[c._rows.length-1].height,s.forceComplete(!1,a||h.targetRowHeight)):s.forceComplete(!1),r=r.concat(n(s))),c._containerHeight=c._containerHeight-h.boxSpacing.vertical,c._containerHeight=c._containerHeight+h.containerPadding.bottom,{containerHeight:c._containerHeight,boxes:c._layoutItems}}function o(){if(h.fullWidthBreakoutRowCadence!==!1&&(c._rows.length+1)%h.fullWidthBreakoutRowCadence===0)var t=!0;return new r({top:c._containerHeight,left:h.containerPadding.left,width:h.containerWidth-h.containerPadding.left-h.containerPadding.right,spacing:h.boxSpacing.horizontal,targetRowHeight:h.targetRowHeight,targetRowHeightTolerance:h.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*h.targetRowHeight,edgeCaseMaxRowHeight:2*h.targetRowHeight,rightToLeft:!1,isBreakoutRow:t})}function n(t){return c._rows.push(t),c._layoutItems=c._layoutItems.concat(t.getItems()),c._containerHeight+=t.height+h.boxSpacing.vertical,t.items}var a=t("merge"),r=t("./row"),h={},c={};i.exports=function(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1};h=a(e,i);var o={},n={};return o.top=isNaN(parseFloat(h.containerPadding.top))?h.containerPadding:h.containerPadding.top,o.right=isNaN(parseFloat(h.containerPadding.right))?h.containerPadding:h.containerPadding.right,o.bottom=isNaN(parseFloat(h.containerPadding.bottom))?h.containerPadding:h.containerPadding.bottom,o.left=isNaN(parseFloat(h.containerPadding.left))?h.containerPadding:h.containerPadding.left,n.horizontal=isNaN(parseFloat(h.boxSpacing.horizontal))?h.boxSpacing:h.boxSpacing.horizontal,n.vertical=isNaN(parseFloat(h.boxSpacing.vertical))?h.boxSpacing:h.boxSpacing.vertical,h.containerPadding=o,h.boxSpacing=n,c._layoutItems=[],c._awakeItems=[],c._inViewportItems=[],c._leadingOrphans=[],c._trailingOrphans=[],c._containerHeight=h.containerPadding.top,c._rows=[],c._orphans=[],s(t.map(function(t){return t.width&&t.width?{aspectRatio:t.width/t.height}:{aspectRatio:t}}))}},{"./row":1,merge:2}]},{},[]);var Tessarray=function(t,i){this.options=i||{},this.setOptionValue("containerClass",!1),this.setOptionValue("selectorClass",!1),this.setOptionValue("imageClass",!1),this.setOptionValue("defaultCategory",!1),this.setOptionValue("resize",!0),this.setOptionValue("timingFunction","ease-in"),this.setOptionValue("duration",375),this.setOptionValue("delay",0),this.setOptionValue("containerTransition",{duration:375,timingFunction:"ease-in",delay:0}),this.setOptionValue("flickr",{}),this.dimensionsLoaded=[],this.containerHasLoaded=!1,this.boxObjects=[],this.boxNodes=[];var e;e=this.options.containerClass?document.getElementsByClassName(this.options.containerClass)[0].getElementsByClassName(t):document.getElementsByClassName(t);for(var s="transform "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, height "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, left "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, top "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, width "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms",o=0;o<e.length;o++)this.boxNodes[o]=e[o],this.boxNodes[o].style.position="absolute",this.boxNodes[o].style.transition=s,this.boxNodes[o].style["-webkit-transition"]=s,this.boxObjects[o]=new TessarrayBox(e[o],o,this);if(this.specifiedContainerWidth=!!this.options.flickr.containerWidth,this.options.containerClass){if(this.container=document.getElementsByClassName(this.options.containerClass)[0],this.container.style.opacity="0",this.options.containerTransition){var s="opacity "+this.options.containerTransition.duration+"ms "+this.options.containerTransition.timingFunction+" "+this.options.containerTransition.delay+"ms";this.container.style.transition=s,this.container.style["-webkit-transition"]=s}this.setContainerWidth(),""===this.container.style.position&&(this.container.style.position="relative"),this.options.flickr.containerPadding?this.options.flickr.containerPadding.bottom?this.containerPaddingBottom=this.options.flickr.containerPadding.bottom:this.containerPaddingBottom=this.options.flickr.containerPadding:this.containerPaddingBottom=10,this.options.resize&&window.addEventListener("resize",this.renderIfNecessary.bind(this)),this.containerLoad()}if(this.options.selectorClass){this.selectors=document.getElementsByClassName(this.options.selectorClass);for(var o=0;o<this.selectors.length;o++){var n=this.selectors[o].getAttribute("data-category");this.selectors[o].addEventListener("click",this.sortByCategory.bind(this,n))}}},TessarrayBox=function(t,i,e){this.index=i,this.tessarray=e,this.classes={};for(var s=t.getAttribute("class").split(" "),o=0;o<s.length;o++)this.classes[s[o]]=t.dataset[s[o]]||null;if(e.options.imageClass?this.image=t.getElementsByClassName(e.options.imageClass)[0]:this.image=t.querySelector("img"),this.image.style.opacity="0",this.image.style.transition="opacity "+e.options.duration+"ms ease-in",e.dimensionsLoaded[i]=!1,t.getAttribute("data-aspect-ratio")||t.getAttribute("data-height")&&t.getAttribute("data-width"))this.givenAspectRatio=!0,this.setAspectRatio(e,t,i);else{this.givenAspectRatio=!1;var n=this.image.getAttribute("src"),a=new Image,r=this;a.onload=function(){r.aspectRatio=this.width/this.height,e.confirmLoad(i)},a.src=n}};Tessarray.prototype.setOptionValue=function(t,i){void 0===this.options[t]&&(this.options[t]=i)},Tessarray.prototype.setContainerWidth=function(){!this.specifiedContainerWidth&&this.options.containerClass&&(this.options.flickr.containerWidth=this.container.clientWidth)},TessarrayBox.prototype.setAspectRatio=function(t,i,e){i.getAttribute("data-aspect-ratio")?(this.aspectRatio=parseFloat(i.getAttribute("data-aspect-ratio")),t.confirmLoad(e)):i.getAttribute("data-height")&&i.getAttribute("data-width")&&(this.aspectRatio=parseFloat(i.getAttribute("data-height"))/parseFloat(i.getAttribute("data-width")),t.confirmLoad(e));var s=this.image.getAttribute("src"),o=new Image,n=this;o.onload=function(){n.image.style.opacity="",n.image.style.transition=""},o.src=s},Tessarray.prototype.confirmLoad=function(t){this.dimensionsLoaded[t]=!0,!this.deterimineIfBoxesLoaded()||!this.containerHasLoaded&&this.options.containerClass||this.initialRender()},Tessarray.prototype.containerLoad=function(){this.containerHasLoaded=!0,this.deterimineIfBoxesLoaded()&&this.initialRender()},Tessarray.prototype.deterimineIfBoxesLoaded=function(){for(var t=0;t<this.dimensionsLoaded.length;t++)if(!this.dimensionsLoaded[t])return!1;return!0},Tessarray.prototype.renderIfNecessary=function(){this.specifiedContainerWidth||this.options.flickr.containerWidth===this.container.clientWidth||this.renderBoxes()},Tessarray.prototype.initialRender=function(){this.options.containerClass&&(this.container.style.opacity="1"),this.options.selectorClass&&this.options.defaultCategory?this.sortByCategory(this.options.defaultCategory):(this.setSelectedBoxes(this.boxObjects),this.renderBoxes())},Tessarray.prototype.sortByCategory=function(t){if(""===t)var i=this.boxObjects;else var e=this.boxObjects.filter(function(i){return void 0!==i.classes[t]}),i=e.sort(function(i){return i.classes[t]});this.setSelectedBoxes(i),this.renderBoxes()},Tessarray.prototype.setSelectedBoxes=function(t){this.selectedBoxes=t,this.indexes?this.oldIndexes=this.indexes:this.oldIndexes=[],this.indexes=this.selectedBoxes.map(function(t){return t.index}),this.ratios=t.map(function(t){return parseFloat(t.aspectRatio)})},Tessarray.prototype.renderBoxes=function(){this.setContainerWidth();var t=require("justified-layout")(this.ratios,this.options.flickr);if(this.options.containerClass)if(t.boxes.length>0){var i=t.boxes[t.boxes.length-1].top+t.boxes[t.boxes.length-1].height+this.containerPaddingBottom;this.container.style.height=i.toString()+"px"}else this.container.style.height="0px";for(var e=0;e<this.boxNodes.length;e++){var s=this.boxNodes[e];if(this.indexes.includes(e)){var o=t.boxes[this.indexes.indexOf(e)];void 0===o?s.style.transform="scale(0)":(s.style.transform="scale(1)",s.style.height=o.height+"px",s.style.left=o.left+"px",s.style.top=o.top+"px",s.style.width=o.width+"px",this.boxObjects[e].givenAspectRatio||(this.boxObjects[e].image.style.opacity="",this.boxObjects[e].image.style.transition=""))}else this.oldIndexes.includes(e)?s.style.transform="scale(0)":s.style.transform="scale(0)"}};